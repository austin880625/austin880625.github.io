title: 在家裡裝的第一組物聯網裝置
path: 2021/08/19
date: 2021/08/19
---
家裡一樓的開關在門口，通往樓上房間的樓梯口在一樓的最裡面，似乎從房子蓋好時的配線就沒有配給這兩個位置用的雙切開關，所以每次晚上要關燈上樓時都要在關燈後摸黑一小段才能上樓，整理家裡的時候就感覺可以把這個開關做成遙控的。技術上都不是太難的東西，麻煩基本上都在電工和零件固定的部分。

## 硬體設計

為了可以同時使用實體開關和遙控的機制，接線上把雙切開關的 1, 3 點接上繼電器的常閉和常開端， 0 點接火線，繼電器的共點接到燈具線上。也就是雙切開關和繼電器形成一組三路開關。

控制用的晶片使用 ESP-01 和 WiFi 連線，接著用 UART 傳送自己規劃的控制指令給另一片 Arduino UNO ，再讓 Arduino 去控制繼電器。不直接用 ESP-01 的原因除了 GPIO 有點少之外，一開始買變壓器和降壓模組的時候也沒想好，變壓器供應 12V 的電，經過 LM1117 降壓模組後雖然電壓是對的但是會變得超燙，所以最後還是用笨方法，直接用一顆 USB 充電器對 Arduino 供 5V ，從上面直接拉 3.3V 給 ESP-01 用。